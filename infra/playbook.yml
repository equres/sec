---
- hosts: "{{ host_names | default('all')}}"
  become: yes
  vars:
      ansible_ssh_user: "{{ ssh_user | default('root')}}"
  tasks:
    - name: Create SEC User
      become: yes
      become_user: root
      become_method: sudo
      user:
        name: sec
        password: '$6$f9PHd4OCB8$Amb0UnKSnWVEbk8GqRdGgJ8PhVIkIlh2RvY9ZIH7y.0.E5t/iM8y3aS36co4eWEOaHA18Gv6NZ5lXVh2Hsqke0'
        state: present
        home: /home/sec
    - name: Apt Upgrade
      become: yes
      become_user: root
      become_method: sudo
      apt:
        upgrade: "yes"
        update_cache: yes
        cache_valid_time: 432000
    - name: Install Software Properties Common
      apt:
        name:
          - software-properties-common
    - name: Install Necessities
      become: yes
      become_user: root
      become_method: sudo
      apt:
        update_cache: yes
        name:
          - git
          - make
          - vim
          - tig
          - ncdu
          - htop
          - tmux
          - jq
          - curl
          - postgresql 
          - postgresql-contrib
          - libpq-dev
          - pip
          - whois
          - syslog-ng
    - name: Install Python Psycopg2
      pip:
        name: psycopg2
    - name: Install GH
      become: yes
      become_user: root
      become_method: sudo
      snap:
        name:
          - gh
    - name: Install Golang
      become: yes
      become_user: root
      become_method: sudo
      snap:
        classic: yes
        name: go